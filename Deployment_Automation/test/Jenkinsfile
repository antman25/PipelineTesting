node('DEPLOY')
{
	stage ('Checkout SCM')
	{
		checkout scm
	}

	try
	{
		def my_config = readJSON file: 'Deployment_Automation/config/MyConfig.json'
	        def keys = my_config['env_info'].keySet() as List
	} 
	catch (exception ex)
	{
		println("Exception: ${ex}")
		keys = []
	}

	println ("Config ${my_config}")
	println ("Keys: ${keys}")
        
        properties (
        [
                parameters (
                         [ choice(name: 'CHOICE', choices: keys, description: 'Pick something') ]
                        )
        ])


	stage ('Step 1')
	{
		println ('Test Step 1')
	}
}
